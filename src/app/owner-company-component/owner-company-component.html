<div class="container mt-4">
  <h2>Cégek</h2>

  <!-- Új cég -->
  <div class="card p-3 mb-4">
    <h5>Új cég</h5>
    <div class="row g-2">
      <div class="col-md-3">
        <input type="text" class="form-control" placeholder="Cégnév" [(ngModel)]="newCompany().name">
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control" placeholder="Adószám" [(ngModel)]="newCompany().taxNumber">
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control" placeholder="Bankszámlaszám" [(ngModel)]="newCompany().accountNumber">
      </div>
      <div class="col-md-3">
        <input type="number" class="form-control" placeholder="Irányítószám" [(ngModel)]="newCompany().postalCode">
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control" placeholder="Település" [(ngModel)]="newCompany().town">
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control" placeholder="Utca" [(ngModel)]="newCompany().street">
      </div>
      <div class="col-md-3">
        <button class="btn btn-success w-100" (click)="addCompany()">Hozzáadás</button>
      </div>
    </div>
  </div>

  <!-- Lista -->
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
    <tr>
      <th>Név</th>
      <th>Adószám</th>
      <th>Bankszámlaszám</th>
      <th>Irányítószám</th>
      <th>Település</th>
      <th>Utca</th>
      <th>Műveletek</th>
    </tr>
    <tr>
    <th>
      <input class="form-control"
             [ngModel]="filters()['name']"
             (ngModelChange)="updateFilter('name', $event)"
             placeholder="Keresés...">
    </th>
    <th>
      <input class="form-control"
             [ngModel]="filters()['taxNumber']"
             (ngModelChange)="updateFilter('taxNumber', $event)"
             placeholder="Keresés...">
    </th>
    <th></th>
    <th></th>
    <th></th>
      <th></th>
      <th></th>
    </tr>
    </thead>
    <tbody>
      @for (company of filteredCompanies(); track company.id) {
        <tr>
          @if (editingCompany() && editingCompany()?.id === company.id) {

            <td><input type="text" class="form-control" [(ngModel)]="editingCompany()!.name"></td>
            <td><input type="text" class="form-control" [(ngModel)]="editingCompany()!.taxNumber"></td>
            <td><input type="text" class="form-control" [(ngModel)]="editingCompany()!.accountNumber"></td>
            <td><input type="number" class="form-control" [(ngModel)]="editingCompany()!.postalCode"></td>
            <td><input type="text" class="form-control" [(ngModel)]="editingCompany()!.town"></td>
            <td><input type="text" class="form-control" [(ngModel)]="editingCompany()!.street"></td>
            <td>
              <button class="btn btn-primary btn-sm me-2" (click)="saveEdit()">Mentés</button>
              <button class="btn btn-secondary btn-sm" (click)="cancelEdit()">Mégse</button>
            </td>
          } @else {

            <td>{{ company.name }}</td>
            <td>{{ company.taxNumber }}</td>
            <td>{{ company.accountNumber }}</td>
            <td>{{ company.postalCode }}</td>
            <td>{{ company.town }}</td>
            <td>{{ company.street }}</td>
            <td>
              <button class="btn btn-warning btn-sm me-2" (click)="editCompany(company)">Szerkesztés</button>
              <button class="btn btn-danger btn-sm" (click)="deleteCompany(company.id!)">Törlés</button>
            </td>
          }
        </tr>
      }
    </tbody>
  </table>
</div>





