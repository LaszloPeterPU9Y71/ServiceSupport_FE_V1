openapi: 3.0.3
info:
  title: Service Support API
  version: 1.0.0

servers:
  - url: http://localhost:8080

security:
  - bearerAuth: [ ]

paths:
  /getAllRole:
    get:
      operationId: Get all roles
      tags: [ Role ]
      security: [ ]
      responses:
        '200':
          description: OK v√°lasz
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string

  /api/health:
    get:
      summary: Egyszer≈± el√©rhet≈ës√©gi teszt
      operationId: healthCheck
      tags: [ Health ]
      security: [ ] # publikus
      responses:
        '200':
          description: OK v√°lasz
          content:
            text/plain:
              schema:
                type: string

  /users:
    get:
      tags:
        - user
      summary: √ñsszes felhaszn√°l√≥ lek√©rdez√©se
      operationId: getAllUsers
      responses:
        '200':
          description: Sikeres v√°lasz
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '401':
          description: Hi√°nyz√≥ vagy hib√°s token
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Unauthorized"
        '403':
          description: Jogosults√°g hi√°nyzik
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Forbidden"

  /users/register:
    post:
      tags: [ user ]
      summary: √öj felhaszn√°l√≥ regisztr√°ci√≥ja
      operationId: registerUser
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterUserRequest'
      responses:
        '200':
          description: Sikeres regisztr√°ci√≥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

  /users/{id}/ban:
    post:
      tags: [ user ]
      summary: Felhaszn√°l√≥ kitilt√°sa
      operationId: banUser
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Sikeres tilt√°s

  /users/{id}/unban:
    post:
      tags: [ user ]
      summary: Felhaszn√°l√≥ tilt√°s√°nak felold√°sa
      operationId: unbanUser
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Sikeres felold√°s

  /users/{id}/password:
    patch:
      tags: [ user ]
      summary: Jelsz√≥ megv√°ltoztat√°sa a r√©gi jelsz√≥ megad√°s√°val
      operationId: changePassword
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [ oldPassword, newPassword ]
              properties:
                oldPassword:
                  type: string
                  format: password
                newPassword:
                  type: string
                  format: password
      responses:
        '200':
          description: Sikeres jelsz√≥csere
        '400':
          description: Hib√°s adatok vagy jelsz√≥ nem egyezik

  /users/password-with-token:
    patch:
      tags: [ user ]
      summary: Jelsz√≥ megv√°ltoztat√°sa reset tokennel (email alapj√°n)
      operationId: changePasswordWithToken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [ email, token, newPassword ]
              properties:
                email:
                  type: string
                  format: email
                token:
                  type: string
                newPassword:
                  type: string
                  format: password
      responses:
        '200':
          description: Sikeres jelsz√≥csere
        '400':
          description: Hib√°s vagy lej√°rt token


  /users/{id}/set-password:
    patch:
      tags: [ user ]
      summary: Admin √°ltal jelsz√≥ be√°ll√≠t√°sa
      operationId: setPassword
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [ password ]
              properties:
                password:
                  type: string
                  format: password
      responses:
        '200':
          description: Jelsz√≥ friss√≠tve

  /users/{id}/roles/{roleName}:
    post:
      tags: [ user ]
      summary: Role hozz√°rendel√©se felhaszn√°l√≥hoz
      operationId: assignRole
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: roleName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Sikeres role-hozz√°rendel√©s
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

    delete:
      tags: [ user ]
      summary: Role elt√°vol√≠t√°sa felhaszn√°l√≥t√≥l
      operationId: removeRole
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
        - name: roleName
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Sikeres role-elt√°vol√≠t√°s
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'

  /users/forgot-password:
    post:
      tags: [ user ]
      summary: Elfelejtett jelsz√≥ ‚Äì token l√©trehoz√°sa
      operationId: forgotPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [ email ]
              properties:
                email:
                  type: string
                  format: email
      responses:
        '200':
          description: Token gener√°lva vagy megl√©v≈ë visszaadva
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  token:
                    type: string
                  validUntil:
                    type: string
                    format: date-time

  /me:
    get:
      tags:
        - user
      summary: Visszaadja a bejelentkezett felhaszn√°l√≥ adatait √©s szerepk√∂reit
      operationId: getCurrentUser
      responses:
        '200':
          description: A bejelentkezett user adatai
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MeResponse'
        '401':
          description: Nincs bejelentkezve vagy √©rv√©nytelen token
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Nincs bejelentkezve"

  /login:
    post:
      tags:
        - auth
      summary: Bejelentkez√©s email + jelsz√≥ p√°rossal
      operationId: login
      security: [ ] # publikus
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Sikeres bejelentkez√©s
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: Hib√°s bejelentkez√©s
          content:
            application/json:
              schema:
                type: string
                example: "Login failed: Bad credentials"
  /companies:
    get:
      tags:
        - company
      summary: List√°zza az √∂sszes c√©get
      operationId: getAllCompanies
      responses:
        '200':
          description: A c√©gek list√°ja
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Company'
    post:
      tags:
        - company
      summary: √öj c√©g l√©trehoz√°sa
      operationId: createCompany
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Company'
      responses:
        '200':
          description: A l√©trehozott c√©g
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Company'

  /companies/{id}:
    get:
      tags:
        - company
      summary: C√©g lek√©r√©se ID alapj√°n
      operationId: getCompanyById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: A k√©rt c√©g adatai
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Company'
        '404':
          description: Nem tal√°lhat√≥
    put:
      tags:
        - company
      summary: C√©g friss√≠t√©se ID alapj√°n
      operationId: updateCompany
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Company'
      responses:
        '200':
          description: A friss√≠tett c√©g
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Company'
        '404':
          description: Nem tal√°lhat√≥
    delete:
      tags:
        - company
      summary: C√©g t√∂rl√©se ID alapj√°n
      operationId: deleteCompany
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '204':
          description: Sikeresen t√∂r√∂lve
        '404':
          description: Nem tal√°lhat√≥

  /companies/search/by-name:
    get:
      tags:
        - company
      summary: C√©gek keres√©se n√©v alapj√°n (LIKE %name%)
      operationId: findCompaniesByName
      parameters:
        - name: name
          in: query
          required: true
          schema:
            type: string
          description: A n√©vr√©szlet, amire keres√ºnk
      responses:
        '200':
          description: A tal√°latok list√°ja
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Company'

  /owner-companies:
    get:
      tags:
        - owner_company
      summary: Get all owner companies
      responses:
        '200':
          description: List of companies
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/OwnerCompany'
    post:
      tags:
        - owner_company
      summary: Create a new owner company
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OwnerCompany'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OwnerCompany'

  /owner-companies/{id}:
    get:
      tags:
        - owner_company
      summary: Get owner company by ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Company found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OwnerCompany'
        '404':
          description: Not found
    put:
      tags:
        - owner_company
      summary: Update owner company
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OwnerCompany'
      responses:
        '200':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OwnerCompany'
    delete:
      tags:
        - owner_company
      summary: Delete owner company
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Deleted
        '404':
          description: Not found


  /owner-company-employees:
    get:
      tags:
        - owner_company_employee
      summary: Get all employees
      responses:
        '200':
          description: List of employees
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/OwnerCompanyEmployee'
    post:
      tags:
        - owner_company_employee
      summary: Create new employee
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OwnerCompanyEmployee'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OwnerCompanyEmployee'

  /owner-company-employees/{id}:
    get:
      tags:
        - owner_company_employee
      summary: Get employee by ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Employee found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OwnerCompanyEmployee'
        '404':
          description: Not found
    put:
      tags:
        - owner_company_employee
      summary: Update employee
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OwnerCompanyEmployee'
      responses:
        '200':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OwnerCompanyEmployee'
    delete:
      tags:
        - owner_company_employee
      summary: Delete employee
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Deleted
        '404':
          description: Not found

  /defects:
    get:
      tags: [ defect ]
      summary: Get all defects
      responses:
        '200':
          description: List of defects
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Defect'
    post:
      tags: [ defect ]
      summary: Create new defect
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Defect'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Defect'

  /defects/{id}:
    get:
      tags: [ defect ]
      summary: Get defect by ID
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Defect found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Defect'
        '404':
          description: Not found
    put:
      tags: [ defect ]
      summary: Update defect
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Defect'
      responses:
        '200':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Defect'
    delete:
      tags: [ defect ]
      summary: Delete defect
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Deleted
        '404':
          description: Not found

  /tools:
    get:
      tags: [ tool ]
      summary: Get all tools
      responses:
        '200':
          description: List of tools
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Tool'
    post:
      tags: [ tool ]
      summary: Create new tool
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Tool'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tool'

  /tools/{id}:
    get:
      tags: [ tool ]
      summary: Get tool by ID
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Tool found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tool'
        '404':
          description: Not found
    put:
      tags: [ tool ]
      summary: Update tool
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Tool'
      responses:
        '200':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tool'
    delete:
      tags: [ tool ]
      summary: Delete tool
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Deleted
        '404':
          description: Not found
  /worksheet/{worksheetId}/assign/{userId}:
    post:
      tags: [ worksheet ]
      summary: Assign a user to a tool
      parameters:
        - in: path
          name: worksheetId
          required: true
          schema: { type: integer }
        - in: path
          name: userId
          required: true
          schema: { type: integer }
      responses:
        '200':
          description: Tool assigned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Worksheet'

  /worksheet/{worksheetId}/unassign:
    post:
      tags: [ worksheet ]
      summary: Unassign the user from a tool
      parameters:
        - in: path
          name: worksheetId
          required: true
          schema: { type: integer }
      responses:
        '200':
          description: Tool unassigned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Worksheet'

  /spare-parts:
    get:
      tags: [ spare_part ]
      summary: List or search spare parts
      parameters:
        - in: query
          name: name
          required: false
          schema:
            type: string
          description: If provided, filters spare parts by partial name match
      responses:
        '200':
          description: List of spare parts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SparePart'
    post:
      tags: [ spare_part ]
      summary: Create a new spare part
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SparePart'
      responses:
        '201':
          description: Spare part created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SparePart'

  /spare-parts/{id}:
    get:
      tags: [ spare_part ]
      summary: Get spare part by ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Spare part found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SparePart'
        '404':
          description: Not found
    put:
      tags: [ spare_part ]
      summary: Update spare part
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SparePart'
      responses:
        '200':
          description: Spare part updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SparePart'
    delete:
      tags: [ spare_part ]
      summary: Delete spare part
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Spare part deleted
        '404':
          description: Not found
  /worksheets:
    get:
      tags: [ worksheet ]
      summary: √ñsszes munkalap lek√©rdez√©se
      operationId: getAllWorksheets
      responses:
        '200':
          description: Munkalapok list√°ja
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Worksheet'

    post:
      tags: [ worksheet ]
      summary: √öj munkalap l√©trehoz√°sa
      operationId: createWorksheet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorksheetCreateRequest'
      responses:
        '201':
          description: L√©trehozott munkalap
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Worksheet'

  /worksheets/{id}:
    get:
      tags: [ worksheet ]
      summary: Munkalap lek√©r√©se ID alapj√°n
      operationId: getWorksheetById
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: A k√©rt munkalap
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Worksheet'
        '404':
          description: Nem tal√°lhat√≥

    delete:
      tags: [ worksheet ]
      summary: Munkalap t√∂rl√©se
      operationId: deleteWorksheet
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Sikeresen t√∂r√∂lve
        '404':
          description: Nem tal√°lhat√≥

  /worksheets/{id}/notes:
    get:
      tags: [ worksheet_note ]
      summary: Megjegyz√©sek lek√©rdez√©se egy munkalaphoz
      operationId: getNotesByWorksheetId
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Megjegyz√©sek list√°ja
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WorksheetNote'

    post:
      tags: [ worksheet_note ]
      summary: Megjegyz√©s hozz√°ad√°sa munkalaphoz
      operationId: createNote
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorksheetNote'
      responses:
        '201':
          description: L√©trehozott megjegyz√©s
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorksheetNote'
  /worksheets/list:
    get:
      tags:
        - worksheet
      summary: R√∂vid√≠tett worksheet lista
      description: Csak a legfontosabb mez≈ëket adja vissza a worksheet-ekhez.
      operationId: getWorksheetList
      responses:
        '200':
          description: R√∂vid√≠tett worksheet lista
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/WorksheetListDto'
  /worksheets/{id}/details:
    get:
      tags: [ worksheet ]
      summary: Get worksheet with full entity graph
      operationId: getWorksheetDetails
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Worksheet with full details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorksheetDetail'
        '404':
          description: Worksheet not found
  /worksheet:
    post:
      summary: Create worksheet
      description: Create a new worksheet with defects, notes, warranty flags, assignee, status, and spare parts.
      tags:
        - worksheet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorksheetSaveRequest'
      responses:
        '201':
          description: Worksheet created successfully
        '400':
          description: Invalid input
        '401':
          description: Unauthorized

  /worksheet/{id}/update:
    put:
      summary: Update worksheet
      description: Update an existing worksheet with defects, notes, warranty flags, assignee, status, and spare parts.
      tags:
        - worksheet
      parameters:
        - name: id
          in: path
          required: true
          description: The ID of the worksheet to update
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorksheetUpdateRequest'
      responses:
        '200':
          description: Worksheet updated successfully
        '400':
          description: Invalid input
        '401':
          description: Unauthorized
        '404':
          description: Worksheet not found
        '500':
          description: "Email k√ºld√©s sikertelen (MessagingException)"
          content:
            text/plain:
              schema:
                type: string
                example: "Email k√ºld√©s sikertelen: Invalid address"

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    WorksheetDetail:
      type: object
      properties:
        worksheetId:
          type: integer
          format: int64
        status:
          $ref: '#/components/schemas/WorksheetStatus'
        isWarranty:
          type: boolean
        hasWarrantyCard:
          type: boolean
        hasInvoiceCopy:
          type: boolean
        hasRegistrationProof:
          type: boolean
        createdAt:
          type: string
          format: date-time
        ownerDescription: # üîπ √öJ mez≈ë
          type: string
        tool:
          $ref: '#/components/schemas/Tool'
        defects:
          type: array
          items:
            $ref: '#/components/schemas/Defect'
        notes:
          type: array
          items:
            $ref: '#/components/schemas/WorksheetNote'
        spareParts:
          type: array
          items:
            $ref: '#/components/schemas/SparePartUsage'
        assignedUser:
          $ref: '#/components/schemas/UserSummary'


    SparePartUsage:
      type: object
      properties:
        sparePart:
          $ref: '#/components/schemas/SparePart'
        quantity:
          type: integer


    UserSummary:
      type: object
      properties:
        id:
          type: integer
        fullName:
          type: string

    WorksheetStatus:
      type: string
      description: A munkalap st√°tusza
      enum:
        - BEERKEZETT
        - FOLYAMATBAN
        - FELKULDVE
        - VISSZAERKEZETT
        - KIAJANLOTT
        - ELFOGADVA
        - KIERTESTVE
        - LEZART
    WorksheetListDto:
      type: object
      properties:
        worksheetId:
          type: integer
          format: int64
        customId:
          type: string
          example: "2501/1"
        toolId:
          type: integer
          format: int64
        toolItemNumber:
          type: string
        toolSerialNumber:
          type: string
        ownerCompanyName:
          type: string
        ownerCompanyEmployeeName:
          type: string
        assignedUserFullName:
          type: string
        status:
          $ref: '#/components/schemas/WorksheetStatus'
    RegisterUserRequest:
      type: object
      required:
        - email
        - password
        - fullName
      properties:
        fullName:
          type: string
        phoneNumber:
          type: string
        email:
          type: string
        password:
          type: string
        position:
          type: string
        roles:
          type: array
          items:
            type: string
    Tool:
      type: object
      properties:
        id:
          type: integer
          example: 1
        tool_id:
          type: string
          example: 2025-10
        itemNumber:
          type: string
          example: "ITM-001"
        name:
          type: string
          example: "F√∫r√≥g√©p"
        serialNumber:
          type: string
          example: "SN-2025-0001"
        typeNumber:
          type: string
          example: "TYP-1234"

        owner:
          $ref: '#/components/schemas/OwnerCompanyEmployee'

        ownerName:
          type: string
          readOnly: true
          description: Az √ºgyf√©l neve (k√©nyelmi mez≈ë lista n√©zethez)
          example: "Kiss J√°nos"

        ownerCompanyName:
          type: string
          readOnly: true
          description: Az √ºgyf√©l c√©g√©nek neve lista n√©zethez
          example: "Szersz√°m Kuck√≥ Kft."

    SparePart:
      type: object
      properties:
        id:
          type: integer
          example: 1
        itemName:
          type: string
          example: "Csap√°gy 6203"
        itemNumber:
          type: string
          example: "BRG-6203"
        nettoBuyingPrice:
          type: integer
          example: 1200
        nettoSellingPrice:
          type: integer
          example: 1800
    Defect:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: "Bearing failure"
    OwnerCompanyEmployee:
      type: object
      properties:
        id:
          type: integer
          example: 101
        email:
          type: string
          format: email
          example: "john.doe@example.com"
        name:
          type: string
          example: "John Doe"
        telNum:
          type: string
          example: 361234567
        title:
          type: string
          example: "Software Engineer"
        ownerCompanyName:
          type: string

    OwnerCompany:
      type: object
      properties:
        id:
          type: integer
        accountNumber:
          type: string
        name:
          type: string
        postalCode:
          type: integer
        street:
          type: string
        taxNumber:
          type: string
        town:
          type: string
    Company:
      type: object
      required:
        - name
        - status
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: "Teszt Kft."
        postalCode:
          type: integer
          example: 1111
        status:
          type: boolean
          example: true
        street:
          type: string
          example: "F≈ë utca 1."
        taxNumber:
          type: string
          example: "12345678-1-12"
        town:
          type: string
          example: "Budapest"
    User:
      type: object
      required: [ id, email, fullName ]
      properties:
        id:
          type: integer
          format: int64
        email:
          type: string
          format: email
        fullName:
          type: string
        phoneNumber:
          type: string
          example: "+36123456789"
        position:
          type: string
          example: "Rendszergazda"
        enabled:
          type: boolean
        roles:
          type: array
          items:
            type: string
          example: [ "ROLE_ADMIN", "ROLE_USER" ]

    LoginRequest:
      type: object
      required: [ email, password ]
      properties:
        email:
          type: string
          format: email
          example: admin@example.com
        password:
          type: string
          format: password
          example: password123

    LoginResponse:
      type: object
      properties:
        token:
          type: string
          description: JWT token
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

    MeResponse:
      type: object
      properties:
        email:
          type: string
          format: email
          example: admin@example.com
        fullName:
          type: string
          example: Admin Felhaszn√°l√≥
        roles:
          type: array
          items:
            type: string
          example: [ "ROLE_ADMIN", "ROLE_USER" ]
    WorksheetCreateRequest:
      type: object
      required:
        - toolId
        - isWarranty
        - hasWarrantyCard
        - hasInvoiceCopy
        - hasRegistrationProof
        - status
        - assignee
      properties:
        toolId:
          type: integer
          description: A g√©p azonos√≠t√≥ja
          example: 2
        isWarranty:
          type: boolean
          description: Garanci√°lis-e
          example: true
        hasWarrantyCard:
          type: boolean
          description: Van-e j√≥t√°ll√°si k√°rtya
          example: false
        hasInvoiceCopy:
          type: boolean
          description: Van-e sz√°mlam√°solat
          example: true
        hasRegistrationProof:
          type: boolean
          description: Van-e regisztr√°ci√≥s igazol√°s
          example: false
        ownerDescription:
          type: string
          description: Tulajdonos √°ltal megadott le√≠r√°s
          example: "asd"
        assignee:
          type: integer
          description: A hozz√°rendelt szerel≈ë ID-je
          example: 2
        status:
          type: string
          description: Munkalap st√°tusza
          enum:
            - BEERKEZETT
            - FOLYAMATBAN
            - FELKULDVE
            - VISSZAERKEZETT
            - KIAJANLOTT
            - ELFOGADVA
            - KIERTESTVE
            - LEZART
          example: BEERKEZETT

    Worksheet:
      type: object
      required: [ toolId ]
      properties:
        id:
          type: integer
          example: 1
        customId:
          type: string
          example: "2501/1"
        toolId:
          type: integer
          example: 5
        isWarranty:
          type: boolean
          example: true
        hasWarrantyCard:
          type: boolean
          example: true
        hasInvoiceCopy:
          type: boolean
          example: false
        hasRegistrationProof:
          type: boolean
          example: false
        createdAt:
          type: string
          format: date-time
          example: "2025-01-05T10:15:30"
    WorksheetNote:
      type: object
      properties:
        noteId:
          type: integer
        userId:
          type: integer
        noteText:
          type: string
        userName:
          type: string
        postedDate:
          type: string
          format: date-time
    WorksheetSaveRequest:
      type: object
      properties:
        toolId:
          type: integer
        defectIds:
          type: array
          items:
            type: integer
        notes:
          type: array
          items:
            $ref: '#/components/schemas/WorksheetNote'
        isWarranty:
          type: boolean
        hasWarrantyCard:
          type: boolean
        hasInvoiceCopy:
          type: boolean
        hasRegistrationProof:
          type: boolean
        assignee:
          type: integer
          nullable: false
        status:
          type: string
          enum:
            - BEERKEZETT
            - FOLYAMATBAN
            - FELKULDVE
            - VISSZAERKEZETT
            - KIAJANLOTT
            - ELFOGADVA
            - KIERTESTVE
            - LEZART
        spareParts:
          type: array
          items:
            type: object
            properties:
              sparePartId:
                type: integer
              quantity:
                type: integer
            required:
              - sparePartId
              - quantity
      required:
        - toolId
        - defectIds
        - notes
        - isWarranty
        - hasWarrantyCard
        - hasInvoiceCopy
        - hasRegistrationProof
        - status
        - spareParts

    WorksheetUpdateRequest:
      allOf:
        - $ref: '#/components/schemas/WorksheetSaveRequest'

